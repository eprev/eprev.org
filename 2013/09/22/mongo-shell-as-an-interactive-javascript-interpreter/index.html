<!DOCTYPE html><html lang="en"><meta charset="utf-8"><title>Mongo shell as an interactive JavaScript interpreter – Anton Eprev</title><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Do you know that MongoDB has JavaScript interpreter? And yes, you can use it."><style>body{margin:0}button,input,select,textarea{margin:0;font-size:100%;font-family:inherit}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular"),local("Merriweather-Regular"),url(/fonts/merriweather-regular.woff2) format("woff2"),url(/fonts/merriweather-regular.woff) format("woff")}@font-face{font-family:Merriweather Sans;font-style:normal;font-weight:300;src:local("Merriweather Sans Light"),local("MerriweatherSans-Light"),url(/fonts/merriweathersans-light.woff2) format("woff2"),url(/fonts/merriweathersans-light.woff) format("woff")}@font-face{font-family:Merriweather Sans;font-style:normal;font-weight:700;src:local("Merriweather Sans Bold"),local("MerriweatherSans-Bold"),url(/fonts/merriweathersans-bold.woff2) format("woff2"),url(/fonts/merriweathersans-bold.woff) format("woff")}@font-face{font-family:Merriweather Sans;font-style:italic;font-weight:300;src:local("Merriweather Sans Light Italic"),local("MerriweatherSans-LightItalic"),url(/fonts/merriweathersans-lightitalic.woff2) format("woff2"),url(/fonts/merriweathersans-lightitalic.woff) format("woff")}html{font-size:16px;line-height:1.5;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;text-size-adjust:none}body{color:#222;font-family:Helvetica Neue,Segoe UI,Arial,sans-serif;font-weight:300}.g--ff-serif,h1,h2,h3,h4,h5,h6{font-family:Georgia,serif;font-weight:400}h1,h2,h3,h4,h5,h6{margin:0 0 1.5rem;page-break-inside:avoid;text-rendering:optimizeLegibility}.fonts-loaded body{font-family:Merriweather Sans,Helvetica Neue,Segoe UI,Arial,sans-serif}.fonts-loaded .g--ff-serif,.fonts-loaded h1,.fonts-loaded h2,.fonts-loaded h3,.fonts-loaded h4,.fonts-loaded h5,.fonts-loaded h6{font-family:Merriweather,Georgia,serif}h1{font-size:2rem}h1,h2{line-height:3rem}h2{font-size:1.75rem}h3{font-size:1.5rem}h3,h4{line-height:1.5rem}h4{font-size:1.3rem}h5{font-size:1.16rem}h5,h6{line-height:1.5rem}h6{font-size:1rem}blockquote,ol,p,pre,ul{margin:1.5rem 0}blockquote{padding-left:1rem;border-left:4px solid #eee;font-style:italic}ul{padding-left:0;list-style-position:outside;list-style-type:square}p{-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}code{font-size:.92rem;font-family:Courier,monospace;line-height:1}abbr{letter-spacing:.1em}a{box-shadow:0 2px #ececec;background-image:linear-gradient(90deg,#ececec,#ececec);background-position:0 100%;background-size:1px 2px;background-repeat:repeat-x;color:inherit;text-decoration:none}a:hover{box-shadow:0 2px #d0e0f0;background-image:linear-gradient(90deg,#d0e0f0,#d0e0f0)}figure{margin:1.5rem 0}figcaption{padding-top:.75rem;color:#888;text-align:center;font-size:.83rem}.g--shady{color:#888}.g--border{box-shadow:0 0 0 1px #ccc}.page{margin:0 auto;padding:1.5rem 0;min-width:320px;max-width:980px}.page__sidebar{display:flex;flex-direction:column;float:left;box-sizing:border-box;padding:0 1rem 0 1.5rem;width:30%}.page__content{box-sizing:border-box;margin-left:30%;padding:0 3rem 0 1rem}.page__user-name{display:inline-block;margin-bottom:1.5rem;text-transform:none;font-size:2rem;line-height:3rem}.page__user-picture{display:block;margin:0 auto 1.5rem;height:9rem}.post__header{display:inline-block;margin-bottom:0}.post__content p,.post__content ul{margin-top:0}.highlight pre{margin:0;background-color:currentColor;box-shadow:1.5rem 0 currentColor,-1.5rem 0 currentColor;color:#f9f9f9}.highlight code{display:block;overflow:auto;padding:1.5rem 0;line-height:1.5}.post-comments{font-size:.92rem;margin-bottom:1.5rem;padding-top:1.5rem;box-shadow:0 -3px #eee}.post__meta{margin:.75rem 0;font-size:.83rem;line-height:1.5rem}.post__content-list li{margin-bottom:1.5rem}.responsive-image{position:relative;width:100%;margin:1.5rem auto}.responsive-image img{position:absolute;top:0;left:0;width:100%}@media (min-width:980px){@supports (width:calc(100%)){.responsive-image--wide{transform:translateX(-1.5rem);width:calc(100% + 3rem)}.responsive-image--wide figcaption{padding-left:1.5rem;padding-right:1.5rem}}}.post-special-archive,.post-special-home{position:relative;font-size:1.5rem;line-height:1.5rem}.post-special-home:before{position:absolute;left:-1rem;content:"\2039"}.archive{padding:0;list-style:none}.archive__item{display:block;margin-bottom:1.5rem}.archive__date{font-size:.92rem;line-height:1.5rem}.archive__header{font-size:1.16rem;line-height:1.5rem}.tags{padding:0;list-style:none}.tags__item{display:inline-block;margin-bottom:1.5rem;font-size:1.16rem;line-height:1.5rem}.tags__item:after{content:"\a0\25aa\a0"}.tags__item:last-child:after{content:""}@media (max-width:979px){ul{padding-left:1rem}.page{padding-top:0}.page__sidebar{float:none;margin-bottom:1rem;padding-top:1.5rem;padding-left:1rem;width:auto;box-shadow:0 1px #eee}.page__content{margin-left:auto;padding-right:1rem}.page__user-picture-story{display:flex;align-items:center;margin-bottom:1.5rem}.page__user-picture{flex-shrink:0;margin-bottom:0;padding-right:1rem;width:4.5rem;height:4.5rem}.page__user-name{display:none}.page__nav{order:-1;margin-top:0;padding-left:0}.page__nav li{display:inline-block}.page__nav li:after{content:"\a0\25aa\a0";font-size:1.16rem;line-height:1}.page__nav li:last-child:after{content:""}.post-special-home:before{position:static}.archive__header{line-height:2rem}}@media (max-width:666px){html{font-size:14px}}@media (max-width:359px){html{font-size:12px}}@media (min-width:1440px){.page{padding-right:calc(980px * .3 - 1.5rem)}}@media (min-width:1680px){html{font-size:20px}.page{max-width:1280px;padding-right:calc(1280px * .3 - 1.5rem)}}.highlight code{color:#485e76}.highlight .c,.highlight .c1,.highlight .cm,.highlight .cs{color:#a5abb1}.highlight .gp{color:#a5abb1}.highlight .gh,.highlight .gp,.highlight .gs,.highlight .gu{font-weight:700}.highlight .k,.highlight .kc,.highlight .kd,.highlight .kn,.highlight .kr,.highlight .nc,.highlight .ne,.highlight .ni,.highlight .nn,.highlight .nt{color:#5e89b9}.highlight .ow{font-weight:700}.highlight .s,.highlight .s1,.highlight .s2,.highlight .sb,.highlight .sc,.highlight .sd,.highlight .se,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#c15847}</style><script src="http://eprev.org/assets/main-51ca7fa3397c1def9446477e2191375d.js" defer="defer"></script><link rel="shortcut icon" href="http://eprev.org/images/icon.png"><link rel="alternate" type="application/atom+xml" title="Feed" href="http://eprev.org/atom.xml"><link rel="canonical" href="http://eprev.org/2013/09/22/mongo-shell-as-an-interactive-javascript-interpreter/"><meta property="og:url" content="http://eprev.org/2013/09/22/mongo-shell-as-an-interactive-javascript-interpreter/"><meta property="og:title" content="Mongo shell as an interactive JavaScript interpreter"><meta property="og:site_name" content="Anton Eprev"><meta property="og:type" content="article"><meta property="og:description" content="Do you know that MongoDB has JavaScript interpreter? And yes, you can use it."><meta property="og:image" content="http://eprev.org/images/default-share-image.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@eprev"><meta name="twitter:title" content="Mongo shell as an interactive JavaScript interpreter"><meta name="twitter:description" content="Do you know that MongoDB has JavaScript interpreter? And yes, you can use it."><script>if(function(e,n,t,a,r,i,o){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,i=n.createElement(t),o=n.getElementsByTagName(t)[0],i.async=1,i.src=a,o.parentNode.insertBefore(i,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-12144011-2",{siteSpeedSampleRate:100}),ga("send","pageview"),window.addEventListener("error",function(e){ga("send","event","JavaScript Error",e.message,e.filename?e.filename+":"+e.lineno:"N/A",{nonInteraction:1})}),window.performance&&void 0!==document.hidden){var prevTimeStamp=performance.now(),timeOnPage=0,accTimeOnPage=function(){document.hidden?timeOnPage+=Math.round(performance.now()-prevTimeStamp):prevTimeStamp=performance.now()};document.addEventListener("visibilitychange",accTimeOnPage),window.addEventListener("unload",function(){accTimeOnPage(),ga("send","timing","Engagement","Time On Page",timeOnPage,{transport:"beacon"})})}var html=document.documentElement;if(sessionStorage.fontsLoaded)html.classList.add("fonts-loaded");else{var script=document.createElement("script");script.src="http://eprev.org/assets/fontfaceobserver-33d2e58a345f3e3ae321cf9c3f99fc74.js",script.async=!0,script.onload=function(){Promise.all([new FontFaceObserver("Merriweather Sans",{weight:300}).load(),new FontFaceObserver("Merriweather Sans",{weight:700}).load(),new FontFaceObserver("Merriweather Sans",{weight:300,style:"italic"}).load(),new FontFaceObserver("Merriweather",{weight:400}).load()]).then(function(){html.classList.add("fonts-loaded"),sessionStorage.fontsLoaded="yes"})},document.head.appendChild(script)}</script><div class="page"><div class="page__sidebar"><div class="page__user-picture-story"><a class="page__user-name g--ff-serif" href="/">@eprev</a> <svg class="page__user-picture" viewBox="0 0 484 570"><path d="M39 503v67h343v-67H39z" fill="#feffff"/><path d="M10.502 569.5v-41c0-28 37.29-41.04 37.29-41.04L127.5 556.5H150v13H10.502zM367 437h27c19 0 65.5 0 85 83v50H367V437zM255 553.5h33v16h-33v-16z" fill="#ff2600"/><path d="M39 191v282c0 19.5 51.5 84 87 84h171c49 0 85-66.5 85-84V191c0-4-48-80-52-80H90.5c-4 0-51.5 80-51.5 80" fill="#ffd400"/><path d="M38 268.92v-122.5c0-34.5 22.736-33.687 53-34-21.5.5-27.5-28.5-27.5-43.5 0-14.5 0-41.5 29-55.5 28.5-14 69.5 4 69.5 4s-20.5 18-34 51.5c1.5 9.5 9 4 9 4s13-41.5 100-63c95.5-9.5 197-16.5 246.5 0-19.5 66.5-101 103-147 102 46 1 46 34.5 46 34.5v122.5h-64v-157c0 9-216.5 7.5-216.5 7.5v150c-30-.5-64-.5-64-.5z" fill="#ff2600"/><path d="M417 342v-55c0-37-36-37-40-37h-15c-4 0-8 4-8 8v113c0 4 4 8 8 8h15c4 0 40 0 40-37M0 287v55c0 37 36 37 40 37h15c4 0 8-4 8-8V258c0-4-4-8-8-8H40c-4 0-40 0-40 37" fill="#ffd400"/><path d="M150 436v17h116v-17H150" fill="#770b00" data-id="mouth"/><path d="M279 342c-25.5 0-46-20.5-46-46s20.5-46 46-46 46 20.5 46 46-20.5 46-46 46m-142 0c-25.5 0-46-20.5-46-46s20.5-46 46-46 46 20.5 46 46-20.5 46-46 46" fill="#feffff"/><circle cx="137" cy="296" r="24" fill="#aad6d7" data-id="right-eye"/><circle cx="279" cy="296" r="24" fill="#aad6d7" data-id="left-eye"/><path d="M137.5 373c-42 0-76.5-34.5-76.5-76.5S95.5 220 137.5 220c32.003 0 59.65 20.03 71 48.147C219.85 240.03 247.497 220 279.5 220c42 0 76.5 34.5 76.5 76.5S321.5 373 279.5 373c-32.003 0-59.65-20.03-71-48.147C197.15 352.97 169.503 373 137.5 373m-.5-31c25.5 0 46-20.5 46-46s-20.5-46-46-46-46 20.5-46 46 20.5 46 46 46m142 0c25.5 0 46-20.5 46-46s-20.5-46-46-46-46 20.5-46 46 20.5 46 46 46" fill="#770b00"/></svg><div class="page__user-story">My name’s Anton Eprev and I’m a web developer working as front-end engineer at Booking.com in Amsterdam, Netherlands. I’m on <a href="https://twitter.com/eprev">Twitter</a>, <a href="https://github.com/eprev">GitHub</a> and <a href="https://unsplash.com/@eprev">Unsplash</a>.</div></div><ul class="page__nav"><li><a href="/">Home</a></li><li><a href="/archive/">Archive</a></li><li><a href="/tags/">Tags</a></li></ul></div><div class="page__content"><div class="post"><h1 class="post__header">Mongo shell as an interactive JavaScript interpreter</h1><div class="post__meta g--shady">September 22, 2013 ∙ <a href="/tags/javascript/">javascript</a>, <a href="/tags/mongodb/">mongodb</a></div><div class="post__content"><p>Do you have MongoDB installed? If you do then you have JavaScript interpreter. MongoDB has SpiderMonkey JavaScript engine. To start an interactive shell you have to type <code>mongo --nodb</code> in the shell.</p><figure class="highlight"><pre><code><span class="gp">$ </span>mongo --nodb
MongoDB shell version: 2.2.0
<span class="gp">&gt; </span>var user <span class="o">=</span> <span class="o">{</span>name: <span class="s2">"Anton Eprev"</span>, age: 27<span class="o">}</span>
<span class="gp">&gt; </span>user
<span class="o">{</span> <span class="s2">"name"</span> : <span class="s2">"Anton Eprev"</span>, <span class="s2">"age"</span> : 27 <span class="o">}</span>
<span class="gp">&gt; </span>print<span class="o">(</span>user<span class="o">)</span>
<span class="o">[</span>object Object]
<span class="gp">&gt; </span>printjson<span class="o">(</span>user<span class="o">)</span>
<span class="o">{</span> <span class="s2">"name"</span> : <span class="s2">"Anton Eprev"</span>, <span class="s2">"age"</span> : 27 <span class="o">}</span>
<span class="gp">&gt; </span>var numbers <span class="o">=</span> <span class="o">[</span>1, 2, 3, 4, 5, 6, 7, 8, 9]
<span class="gp">&gt; </span>print<span class="o">(</span>numbers<span class="o">)</span>
1,2,3,4,5,6,7,8,9
<span class="gp">&gt; </span>printjson<span class="o">(</span>numbers<span class="o">)</span>
<span class="o">[</span> 1, 2, 3, 4, 5, 6, 7, 8, 9 <span class="o">]</span></code></pre></figure><p>And of course the shell allows you to use loops, user functions and etc.:</p><figure class="highlight"><pre><code><span class="gp">&gt; </span><span class="k">for</span> <span class="o">(</span>var i <span class="k">in </span>user<span class="o">)</span> <span class="o">{</span> print<span class="o">(</span>i, user[i]<span class="o">)</span> <span class="o">}</span>
name Anton Eprev
age 27
<span class="gp">&gt; </span><span class="k">function </span>add<span class="o">(</span>x<span class="o">){</span> <span class="k">return function</span><span class="o">(</span>y<span class="o">){</span> <span class="k">return </span>x + y <span class="o">}</span> <span class="o">}</span>
<span class="gp">&gt; </span>add<span class="o">(</span>3<span class="o">)(</span>4<span class="o">)</span>
7
<span class="gp">&gt; </span><span class="o">{</span>
... <span class="k">for</span> <span class="o">(</span>var i <span class="o">=</span> 0; i &lt; 10; i++<span class="o">)</span>
...     print<span class="o">(</span>i<span class="o">)</span>
... <span class="o">}</span>
0
1
…
9</code></pre></figure><p>You can also use the <code>cat</code> function to read the file’s contents.</p><figure class="highlight"><pre><code><span class="gp">&gt; </span>var profile <span class="o">=</span> cat<span class="o">(</span><span class="s1">'.profile'</span><span class="o">)</span>
<span class="gp">&gt; </span>profile
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/opt/local/bin:/opt/local/sbin:<span class="nv">$PATH</span>
…</code></pre></figure><p>You may even explore global scope by executing <code>printjson(this)</code> and find out the following functions:</p><figure class="highlight"><pre><code><span class="nx">pwd</span><span class="p">()</span>
<span class="nx">ls</span><span class="p">()</span>
<span class="nx">cd</span><span class="p">()</span>
<span class="nx">mkdir</span><span class="p">()</span>
<span class="nx">hostname</span><span class="p">()</span>
<span class="nx">sleep</span><span class="p">()</span>
<span class="nx">hex_md5</span><span class="p">()</span></code></pre></figure><p>And finally, you can run a JavaScript file using MongoDB shell.</p><figure class="highlight"><pre><code><span class="gp">$ </span>cat hello.js
print<span class="o">(</span><span class="s2">"Hello World!"</span><span class="o">)</span>;
<span class="gp">$ </span>mongo --nodb hello.js
MongoDB shell version: 2.2.0
Hello World!</code></pre></figure><p>Happy coding =]</p></div></div><div class="post-special-home"><a href="/">Home</a></div></div></div></html>